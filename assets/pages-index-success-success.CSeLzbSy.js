var S=(V,c,m)=>new Promise((x,i)=>{var f=n=>{try{_(m.next(n))}catch(p){i(p)}},t=n=>{try{_(m.throw(n))}catch(p){i(p)}},_=n=>n.done?x(n.value):Promise.resolve(n.value).then(f,t);_((m=m.apply(V,c)).next())});import{d as E,u as O,r as y,x as R,a as $,w as o,b as U,e as v,H as F,f as b,_ as H,o as k,g as e,i as L,K as A,l,M as B,y as w,k as d,m as u,a4 as z,p as G}from"./index-BFESJqT6.js";import{_ as K,a as M}from"./wd-textarea.BEJUYWe4.js";import{u as q,i as J}from"./jdwl.28qN5MSr.js";import{T as Q}from"./TopHeader.Cms7bPsr.js";import{B as I}from"./bottomBtn.C1nJVWm-.js";import"./vue-query.B9vfsHwb.js";const W=E({__name:"success",setup(V){const c=O(),m=y(c.userInfo.user.channelName),x=y(c.userInfo.user.nickName),i=y([]),f=y(!0),t=y({customerName:"",customerPhone:"",needType:"",sucessAct:"",remark:""});R(()=>{_()});const _=()=>S(this,null,function*(){const h=yield q({params:{dictType:"jdwl_need_type"}});i.value=h.data});function n(){t.value={customerName:"",customerPhone:"",needType:"",sucessAct:"",remark:""},f.value=!0}function p(){if(!t.value.customerName.trim()){u({title:"请输入客户姓名",icon:"none"});return}if(!t.value.customerPhone.trim()){u({title:"请输入客户电话",icon:"none"});return}if(!/^1[3-9]\d{9}$/.test(t.value.customerPhone)){u({title:"请输入正确的手机号码",icon:"none"});return}if(!t.value.needType){u({title:"请选择需求类型",icon:"none"});return}if(!t.value.sucessAct.trim()){u({title:"请输入成功举措",icon:"none"});return}if(!t.value.remark.trim()){u({title:"请输入处理备注",icon:"none"});return}t.value.holdResult="成功",t.value.channelName=c.userInfo.user.channelName,t.value.channelId=c.userInfo.user.channelId,J({body:t.value}).then(s=>{s.code===200&&(u({title:"提交成功",icon:"success"}),f.value=!1)})}function g(){z({url:"/pages/index/index"})}return(h,s)=>{const a=L,N=v(b("wd-input"),F),P=v(b("wd-picker"),K),T=v(b("wd-textarea"),M),D=v(b("wd-icon"),H),C=U("layout-default-uni"),j=U("global-ku-root");return k(),$(j,null,{default:o(()=>[e(C,null,{default:o(()=>[e(a,{class:"success-page min-h-screen bg-[#f5f5f5]"},{default:o(()=>[e(Q,{title:l(m),subtitle:l(x),icon:"user"},null,8,["title","subtitle"]),l(f)?(k(),A(B,{key:0},[e(a,{class:"content-container"},{default:o(()=>[e(a,{class:"form-detail-card"},{default:o(()=>[e(a,{class:"form-row"},{default:o(()=>[e(a,{class:"form-label"},{default:o(()=>[w("span",{style:{color:"red"}},"*"),d("客户姓名")]),_:1}),e(a,{class:"form-content"},{default:o(()=>[e(N,{modelValue:l(t).customerName,"onUpdate:modelValue":s[0]||(s[0]=r=>l(t).customerName=r),placeholder:"请输入客户姓名"},null,8,["modelValue"])]),_:1})]),_:1}),e(a,{class:"form-row"},{default:o(()=>[e(a,{class:"form-label"},{default:o(()=>[w("span",{style:{color:"red"}},"*"),d("客户电话")]),_:1}),e(a,{class:"form-content"},{default:o(()=>[e(N,{modelValue:l(t).customerPhone,"onUpdate:modelValue":s[1]||(s[1]=r=>l(t).customerPhone=r),placeholder:"请输入客户电话",type:"tel"},null,8,["modelValue"])]),_:1})]),_:1}),e(a,{class:"form-row"},{default:o(()=>[e(a,{class:"form-label"},{default:o(()=>[w("span",{style:{color:"red"}},"*"),d("需求类型")]),_:1}),e(a,{class:"form-content"},{default:o(()=>[e(P,{modelValue:l(t).needType,"onUpdate:modelValue":s[2]||(s[2]=r=>l(t).needType=r),placeholder:"请选择需求类型",columns:l(i),"value-key":"dictValue","label-key":"dictLabel"},null,8,["modelValue","columns"])]),_:1})]),_:1}),e(a,{class:"form-row"},{default:o(()=>[e(a,{class:"form-label"},{default:o(()=>[w("span",{style:{color:"red"}},"*"),d("成功举措")]),_:1}),e(a,{class:"form-content"},{default:o(()=>[e(T,{modelValue:l(t).sucessAct,"onUpdate:modelValue":s[3]||(s[3]=r=>l(t).sucessAct=r),placeholder:"请输入成功举措",rows:3,maxlength:500,"show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),e(a,{class:"form-row"},{default:o(()=>[e(a,{class:"form-label"},{default:o(()=>[w("span",{style:{color:"red"}},"*"),d("处理备注")]),_:1}),e(a,{class:"form-content"},{default:o(()=>[e(T,{modelValue:l(t).remark,"onUpdate:modelValue":s[4]||(s[4]=r=>l(t).remark=r),placeholder:"请输入处理备注",rows:3,maxlength:500,"show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(I,{"submit-text":"提交","save-draft-text":"返回首页",onSubmit:p,onSaveDraft:g})],64)):(k(),A(B,{key:1},[e(a,{class:"flex items-center justify-center flex-col mt-10"},{default:o(()=>[e(D,{name:"check-circle-filled",size:"100px",color:"#4A90E2"}),e(a,{class:"text-xl font-bold"},{default:o(()=>[d("录入成功")]),_:1})]),_:1}),e(I,{"submit-text":"新增补录","save-draft-text":"返回首页",onSubmit:n,onSaveDraft:g})],64))]),_:1})]),_:1})]),_:1})}}}),le=G(W,[["__scopeId","data-v-6fc9cb3d"]]);export{le as default};
